<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Document Translator (MVP)</title>
  </head>
  <body>
    <div id="app">
      <h1>AI Document Translator (MVP)</h1>

      <section>
        <h2>1) Connection (NVIDIA NIM / OpenAI-compatible)</h2>
        <div class="grid">
          <label>Base URL
            <input id="baseUrl" placeholder="e.g. https://integrate.api.nvidia.com/v1" />
          </label>

          <label>API Key
            <input id="apiKey" placeholder="paste your API key here" />
          </label>

          <label>Model (dropdown)
            <select id="model"></select>
          </label>

          <button id="loadModels">Load Models</button>
          <button id="saveSettings">Save Settings</button>
        </div>

        <pre id="settingsHint"></pre>
      </section>

      <section>
        <h2>2) Upload DOCX & Create Task</h2>
        <div class="grid">
          <label>Direction
            <select id="direction">
              <option value="zh->en">Chinese → English</option>
              <option value="en->zh">English → Chinese</option>
            </select>
          </label>

          <label>Select DOCX
            <input id="file" type="file" accept=".docx" />
          </label>

          <button id="createTask">Create Task</button>
        </div>

        <pre id="taskHint"></pre>
      </section>

      <section>
        <h2>3) Translate & Progress (Auto)</h2>
        <div class="grid">
          <button id="runTranslate">Start / Continue Translation</button>
          <button id="loadBlocks">Load Blocks</button>
          <button id="exportDocx">Export DOCX</button>
        </div>

        <div class="progressRow">
          <progress id="progressBar" max="1" value="0"></progress>
          <span id="progressPct">0%</span>
          <span id="progressStatus"></span>
        </div>
        <div id="progressCounts" class="small"></div>

        <pre id="progressHint"></pre>
      </section>

      <section>
        <h2>4) Review</h2>
        <div class="twoCol">
          <div>
            <h3>Block List</h3>
            <div id="blockList" class="list"></div>
          </div>
          <div>
            <h3>Edit</h3>
            <div>
              <div class="small">Source:</div>
              <textarea id="srcText" readonly></textarea>
              <div class="small">Translation (editable):</div>
              <textarea id="dstText"></textarea>
              <button id="saveBlock">Save Changes</button>
              <pre id="blockHint"></pre>
            </div>
          </div>
        </div>
      </section>
    </div>

    <script type="module" src="/src/main.ts"></script>

    <style>
      body { font-family: Arial, Helvetica, sans-serif; margin: 16px; }
      .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; align-items: end; }
      input, select, textarea { width: 100%; box-sizing: border-box; padding: 6px; }
      textarea { height: 140px; }
      button { padding: 8px 10px; }
      pre { background: #f6f6f6; padding: 10px; white-space: pre-wrap; }
      .twoCol { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
      .list { border: 1px solid #ddd; max-height: 420px; overflow: auto; padding: 6px; }
      .item { border-bottom: 1px solid #eee; padding: 6px; cursor: pointer; }
      .item:hover { background: #fafafa; }
      .small { color: #666; margin: 6px 0; }
      .progressRow { display: flex; align-items: center; gap: 10px; margin: 10px 0; }
      progress { width: 420px; height: 18px; }
      #progressPct { min-width: 48px; }
      #progressStatus { color: #444; }
    </style>
  </body>
</html>
